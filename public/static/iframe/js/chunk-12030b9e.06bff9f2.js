(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-12030b9e"],{1276:function(e,t,l){"use strict";var o=l("d784"),a=l("44e7"),r=l("825a"),n=l("1d80"),i=l("4840"),s=l("8aa5"),c=l("50c4"),u=l("14c3"),m=l("9263"),p=l("d039"),d=[].push,b=Math.min,f=4294967295,h=!p((function(){return!RegExp(f,"y")}));o("split",2,(function(e,t,l){var o;return o="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,l){var o=String(n(this)),r=void 0===l?f:l>>>0;if(0===r)return[];if(void 0===e)return[o];if(!a(e))return t.call(o,e,r);var i,s,c,u=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),b=0,h=new RegExp(e.source,p+"g");while(i=m.call(h,o)){if(s=h.lastIndex,s>b&&(u.push(o.slice(b,i.index)),i.length>1&&i.index<o.length&&d.apply(u,i.slice(1)),c=i[0].length,b=s,u.length>=r))break;h.lastIndex===i.index&&h.lastIndex++}return b===o.length?!c&&h.test("")||u.push(""):u.push(o.slice(b)),u.length>r?u.slice(0,r):u}:"0".split(void 0,0).length?function(e,l){return void 0===e&&0===l?[]:t.call(this,e,l)}:t,[function(t,l){var a=n(this),r=void 0==t?void 0:t[e];return void 0!==r?r.call(t,a,l):o.call(String(a),t,l)},function(e,a){var n=l(o,e,this,a,o!==t);if(n.done)return n.value;var m=r(e),p=String(this),d=i(m,RegExp),y=m.unicode,g=(m.ignoreCase?"i":"")+(m.multiline?"m":"")+(m.unicode?"u":"")+(h?"y":"g"),v=new d(h?m:"^(?:"+m.source+")",g),w=void 0===a?f:a>>>0;if(0===w)return[];if(0===p.length)return null===u(v,p)?[p]:[];var k=0,F=0,x=[];while(F<p.length){v.lastIndex=h?F:0;var C,S=u(v,h?p:p.slice(F));if(null===S||(C=b(c(v.lastIndex+(h?0:F)),p.length))===k)F=s(p,F,y);else{if(x.push(p.slice(k,F)),x.length===w)return x;for(var _=1;_<=S.length-1;_++)if(x.push(S[_]),x.length===w)return x;F=k=C}}return x.push(p.slice(k)),x}]}),!h)},2532:function(e,t,l){"use strict";var o=l("23e7"),a=l("5a34"),r=l("1d80"),n=l("ab13");o({target:"String",proto:!0,forced:!n("includes")},{includes:function(e){return!!~String(r(this)).indexOf(a(e),arguments.length>1?arguments[1]:void 0)}})},"3cc5":function(e,t,l){},"44e7":function(e,t,l){var o=l("861d"),a=l("c6b6"),r=l("b622"),n=r("match");e.exports=function(e){var t;return o(e)&&(void 0!==(t=e[n])?!!t:"RegExp"==a(e))}},"5a34":function(e,t,l){var o=l("44e7");e.exports=function(e){if(o(e))throw TypeError("The method doesn't accept regular expressions");return e}},"7db0":function(e,t,l){"use strict";var o=l("23e7"),a=l("b727").find,r=l("44d2"),n=l("ae40"),i="find",s=!0,c=n(i);i in[]&&Array(1)[i]((function(){s=!1})),o({target:"Array",proto:!0,forced:s||!c},{find:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),r(i)},ab13:function(e,t,l){var o=l("b622"),a=o("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(l){try{return t[a]=!1,"/./"[e](t)}catch(o){}}return!1}},caad:function(e,t,l){"use strict";var o=l("23e7"),a=l("4d64").includes,r=l("44d2"),n=l("ae40"),i=n("indexOf",{ACCESSORS:!0,1:0});o({target:"Array",proto:!0,forced:!i},{includes:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),r("includes")},d81d:function(e,t,l){"use strict";var o=l("23e7"),a=l("b727").map,r=l("1dde"),n=l("ae40"),i=r("map"),s=n("map");o({target:"Array",proto:!0,forced:!i||!s},{map:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},eb9c:function(e,t,l){"use strict";var o=l("3cc5"),a=l.n(o);a.a},f7a6:function(e,t,l){"use strict";l.r(t);var o=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"box_wrap"},[l("div",{staticClass:"box1"},[l("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm form1",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"80px"}},[l("el-form-item",{attrs:{label:"签约日期:"}},[l("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.dataClick},model:{value:e.allData,callback:function(t){e.allData=t},expression:"allData"}})],1),l("el-form-item",{attrs:{label:"客户:"}},[l("el-input",{model:{value:e.ruleForm.customer,callback:function(t){e.$set(e.ruleForm,"customer",t)},expression:"ruleForm.customer"}})],1),l("el-form-item",{attrs:{label:"合同编号:"}},[l("el-input",{model:{value:e.ruleForm.contractNo,callback:function(t){e.$set(e.ruleForm,"contractNo",t)},expression:"ruleForm.contractNo"}})],1),l("el-form-item",{attrs:{label:"布编:"}},[l("el-input",{model:{value:e.ruleForm.clothId,callback:function(t){e.$set(e.ruleForm,"clothId",t)},expression:"ruleForm.clothId"}})],1),l("el-form-item",[l("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.contractSearchForm("ruleForm")}}},[e._v("检索")]),l("el-button",{nativeOn:{click:function(t){return e.contractResetForm(t)}}},[e._v("重置")])],1)],1)],1),l("div",{staticClass:"box2"},[l("div",{staticClass:"add_contract",on:{click:e.addcontract}},[l("i",{staticClass:"el-icon-circle-plus-outline"}),e._v(" 新增 ")]),l("el-table",{ref:"singleTable",staticClass:"table1",staticStyle:{width:"100%"},attrs:{data:e.tableData,"highlight-current-row":"","max-height":"240","row-key":"id",border:e.border,"row-style":{height:"20px"},"cell-style":{padding:"0px"}},on:{"row-click":e.allclick}},[l("el-table-column",{attrs:{type:"index",label:"序号",align:"center"}}),l("el-table-column",{attrs:{property:"contractNo",label:"合同编号",width:"120",align:"center"}}),l("el-table-column",{attrs:{property:"customer",label:"客户",width:"150",align:"center"}}),l("el-table-column",{attrs:{property:"signPlace",label:"地点",width:"100",align:"center"}}),l("el-table-column",{attrs:{property:"saleStyle",label:"销售类型",width:"100",align:"center"}}),l("el-table-column",{attrs:{property:"signDate",label:"签约日期",width:"100",align:"center"}}),l("el-table-column",{attrs:{property:"contractBoby",label:"公司",width:"250",align:"center"}}),l("el-table-column",{attrs:{property:"classify",label:"布料",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s("0"==t.row.classify?"牛仔布":"1"==t.row.classify?"染色布":"针织布"))]}}])}),l("el-table-column",{attrs:{property:"brand",label:"品牌",width:"100",align:"center"}}),l("el-table-column",{attrs:{label:"操作",width:"320",fixed:"right",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{staticStyle:{margin:"2px"},attrs:{type:"success",size:"mini"},nativeOn:{click:function(l){return e.editorClick(t.row)}}},[e._v("编辑")]),l("el-button",{attrs:{type:"danger",size:"mini",disabled:"50"==t.row.symbol},nativeOn:{click:function(l){return e.finishClick(t.row)}}},[e._v(e._s(50==t.row.symbol?"已完结":"完结"))]),l("el-button",{attrs:{type:"primary",size:"mini",disabled:"1"==t.row.symbol||"50"==t.row.symbol},nativeOn:{click:function(l){return e.approvalClick(t.row)}}},[e._v(e._s(1==t.row.symbol?"已审批":"提交审批"))]),l("el-button",{attrs:{type:"warning",size:"mini"},nativeOn:{click:function(l){return e.seeClick(t.row)}}},[e._v("预览")])]}}])})],1)],1),l("div",{staticClass:"box3"},[l("div",{staticStyle:{display:"flex"}},[l("div",{staticClass:"add_contract2",on:{click:e.addcontract2}},[l("i",{staticClass:"el-icon-circle-plus-outline"}),e._v(" 新增布料 ")]),l("div",{staticClass:"add_contract3",on:{click:e.addcontract3}},[l("i",{staticClass:"el-icon-circle-plus-outline"}),e._v(" 新增特价布 ")])]),l("el-table",{ref:"singleTable",staticClass:"table1",staticStyle:{width:"100%"},attrs:{data:e.tableData2,"highlight-current-row":"","max-height":"240","row-key":"id",border:e.border,"row-style":{height:"20px"},"cell-style":{padding:"0px"}}},[l("el-table-column",{attrs:{type:"index",label:"序号",align:"center"}}),l("el-table-column",{attrs:{property:"clothId",label:"布编",width:"150",align:"center"}}),l("el-table-column",{attrs:{property:"quantity",label:"数量",align:"center"}}),l("el-table-column",{attrs:{property:"upQuantity",label:"上浮动",align:"center"}}),l("el-table-column",{attrs:{property:"downQuantity",label:"下浮动",align:"center"}}),l("el-table-column",{attrs:{property:"unit",label:"单位",align:"center"}}),l("el-table-column",{attrs:{property:"unitPrice",label:"单价",align:"center"}}),l("el-table-column",{attrs:{property:"moneyStyle",label:"交易类型",align:"center"}}),l("el-table-column",{attrs:{property:"exportRate",label:"出口汇率",align:"center"}}),l("el-table-column",{attrs:{property:"noExportRate",label:"非出口汇率",width:"100",align:"center"}}),l("el-table-column",{attrs:{property:"price",label:"金额",width:"120",align:"center"}}),l("el-table-column",{attrs:{property:"etrMoney",label:"额外金额",align:"center"}}),l("el-table-column",{attrs:{property:"programMoney",label:"项目费用",align:"center"}}),l("el-table-column",{attrs:{label:"是否特价",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",[e._v(e._s("1"==t.row.bargain?"是":"否"))])]}}])}),l("el-table-column",{attrs:{property:"brand",label:"海关编号",align:"center"}}),l("el-table-column",{attrs:{property:"otherMonry",label:"其他金额",align:"center"}}),l("el-table-column",{attrs:{label:"操作",width:"150px",fixed:"right",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{staticStyle:{margin:"2px"},attrs:{type:"success",size:"mini"},nativeOn:{click:function(l){return e.zEditorClick(t.row)}}},[e._v("编辑")]),l("el-button",{attrs:{type:"danger",size:"mini"},nativeOn:{click:function(l){return e.zDeleteClick(t.row)}}},[e._v("删除")])]}}])})],1)],1),l("el-dialog",{attrs:{title:"新增布料",visible:e.clothOutTableVisible,closeOnClickModal:e.closeOnClickModal,closeOnPressEscape:e.closeOnPressEscape,width:"80%"},on:{"update:visible":function(t){e.clothOutTableVisible=t}}},[l("div",{},[l("el-button",{staticStyle:{marginBottom:"10px"},attrs:{type:"primary"},on:{click:e.clothQuery}},[e._v("选择布料")])],1),l("div",{staticClass:"clothtable1"},[l("el-table",{staticStyle:{width:"100%"},attrs:{border:e.border,"row-style":{height:"20px"},"cell-style":{padding:"0px"},data:e.clothtablelist}},[l("el-table-column",{attrs:{type:"index",label:"序号"}}),l("el-table-column",{attrs:{property:"fabricCode",label:"布编",align:"center"}}),l("el-table-column",{attrs:{property:"construstion",label:"组织",align:"center"}}),l("el-table-column",{attrs:{property:"content",label:"成分",width:"200",align:"center"}}),l("el-table-column",{attrs:{property:"width",label:"布封",align:"center"}}),l("el-table-column",{attrs:{label:"布重",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.beforeWash+"/"+t.row.afterWash))]}}])}),l("el-table-column",{attrs:{property:"colour",label:"颜色",align:"center"}}),l("el-table-column",{attrs:{label:"商品名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s("0"==t.row.theme?"牛仔布":"1"==t.row.theme?"染色布":"针织布"))]}}])}),l("el-table-column",{attrs:{property:"quantity",label:"数量",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{autocomplete:"off",type:"number",min:"0"},model:{value:t.row.quantity,callback:function(l){e.$set(t.row,"quantity",l)},expression:"scope.row.quantity"}})]}}])}),l("el-table-column",{attrs:{property:"upQuantity",label:"上范围",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{autocomplete:"off",type:"number",min:"0"},model:{value:t.row.upQuantity,callback:function(l){e.$set(t.row,"upQuantity",l)},expression:"scope.row.upQuantity"}})]}}])}),l("el-table-column",{attrs:{property:"downQuantity",label:"下范围",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{autocomplete:"off",type:"number",min:"0"},model:{value:t.row.downQuantity,callback:function(l){e.$set(t.row,"downQuantity",l)},expression:"scope.row.downQuantity"}})]}}])}),l("el-table-column",{attrs:{label:"单位",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-select",{model:{value:t.row.unit,callback:function(l){e.$set(t.row,"unit",l)},expression:"scope.row.unit"}},[l("el-option",{attrs:{label:"码",value:"码"}}),l("el-option",{attrs:{label:"米",value:"米"}}),l("el-option",{attrs:{label:"KG",value:"KG"}}),l("el-option",{attrs:{label:"件",value:"件"}})],1)]}}])}),l("el-table-column",{attrs:{label:"单价",width:"120",property:"xsdj",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{autocomplete:"off",type:"number",min:"0",disabled:!0},model:{value:t.row.unitPrice,callback:function(l){e.$set(t.row,"unitPrice",l)},expression:"scope.row.unitPrice"}})]}}])}),l("el-table-column",{attrs:{label:"币种",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-select",{model:{value:t.row.moneyStyle,callback:function(l){e.$set(t.row,"moneyStyle",l)},expression:"scope.row.moneyStyle"}},[l("el-option",{attrs:{label:"RMB",value:"RMB"}}),l("el-option",{attrs:{label:"港币",value:"港币"}}),l("el-option",{attrs:{label:"美元",value:"美元"}})],1)]}}])}),l("el-table-column",{attrs:{label:"出口汇率",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{autocomplete:"off",placeholder:"3.5",disabled:!0},model:{value:t.row.exportRate,callback:function(l){e.$set(t.row,"exportRate",l)},expression:"scope.row.exportRate"}})]}}])}),l("el-table-column",{attrs:{label:"不出口汇率",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{autocomplete:"off",placeholder:"2.96",disabled:!0},model:{value:t.row.noExportRate,callback:function(l){e.$set(t.row,"noExportRate",l)},expression:"scope.row.noExportRate"}})]}}])}),l("el-table-column",{attrs:{property:"price",label:"金额",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",[e._v(e._s(t.row.price=t.row.unitPrice*t.row.quantity))])]}}])}),l("el-table-column",{attrs:{label:"附加费",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{autocomplete:"off",type:"number",min:"0"},model:{value:t.row.etrMoney,callback:function(l){e.$set(t.row,"etrMoney",l)},expression:"scope.row.etrMoney"}})]}}])}),l("el-table-column",{attrs:{label:"项目费用",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{autocomplete:"off",type:"number",min:"0"},model:{value:t.row.programMoney,callback:function(l){e.$set(t.row,"programMoney",l)},expression:"scope.row.programMoney"}})]}}])}),l("el-table-column",{attrs:{label:"其他费用",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{autocomplete:"off",type:"number",min:"0"},model:{value:t.row.otherMonry,callback:function(l){e.$set(t.row,"otherMonry",l)},expression:"scope.row.otherMonry"}})]}}])})],1)],1),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.clothOutTableVisible=!1}}},[e._v("取消")]),l("el-button",{attrs:{type:"primary"},on:{click:e.zClothSave}},[e._v("保存")])],1),l("el-dialog",{attrs:{width:"60%",title:"选择布料",visible:e.clothInTableVisible,"append-to-body":"",closeOnClickModal:e.closeOnClickModal,closeOnPressEscape:e.closeOnPressEscape},on:{"update:visible":function(t){e.clothInTableVisible=t}}},[l("div",[l("div",[l("el-form",{ref:"formInline",staticClass:"demo-form-inline",attrs:{rules:e.rules,inline:!0,model:e.formInline}},[l("el-form-item",{attrs:{label:"布编",prop:"cloth"}},[l("el-input",{attrs:{autocomplete:"off",placeholder:"请输入布编"},model:{value:e.formInline.cloth,callback:function(t){e.$set(e.formInline,"cloth",t)},expression:"formInline.cloth"}})],1),l("el-form-item",[l("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.addcloth("formInline")}}},[e._v("查询")])],1)],1)],1),l("div",{staticClass:"clothtable1"},[l("el-table",{staticStyle:{width:"100%"},attrs:{border:e.border,"row-style":{height:"30px"},"cell-style":{padding:"0px"},data:e.clothlist},on:{"row-dblclick":e.switchCloth}},[l("el-table-column",{attrs:{type:"index",label:"序号"}}),l("el-table-column",{attrs:{property:"fabricCode",label:"布编"}}),l("el-table-column",{attrs:{property:"construstion",label:"组织"}}),l("el-table-column",{attrs:{property:"content",label:"成分"}}),l("el-table-column",{attrs:{property:"width",label:"布封"}}),l("el-table-column",{attrs:{label:"布重"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.beforeWash+"/"+t.row.afterWash))]}}])}),l("el-table-column",{attrs:{property:"colour",label:"颜色"}}),l("el-table-column",{attrs:{property:"xsdj",label:"单价(码)"}})],1)],1)])])],1),l("el-dialog",{attrs:{title:"新增特价布",visible:e.noClothOutTableVisible,closeOnClickModal:e.closeOnClickModal,closeOnPressEscape:e.closeOnPressEscape,"before-close":e.handleDialogClose,width:"80%"},on:{"update:visible":function(t){e.noClothOutTableVisible=t}}},[l("div",{},[l("el-button",{staticStyle:{marginBottom:"10px"},attrs:{type:"primary"},on:{click:e.cheapClothQuery}},[e._v("选择布料")])],1),l("div",{staticClass:"clothtable1"},[l("el-table",{staticStyle:{width:"100%"},attrs:{border:e.border,"row-style":{height:"20px"},"cell-style":{padding:"0px"},data:e.specialtablelist}},[l("el-table-column",{attrs:{type:"index",label:"序号"}}),l("el-table-column",{attrs:{property:"fabricCode",label:"布编"}}),l("el-table-column",{attrs:{property:"construstion",label:"组织"}}),l("el-table-column",{attrs:{property:"content",label:"成分"}}),l("el-table-column",{attrs:{property:"width",label:"布封"}}),l("el-table-column",{attrs:{label:"布重"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.beforeWash+"/"+t.row.afterWash))]}}])}),l("el-table-column",{attrs:{property:"colour",label:"颜色"}}),l("el-table-column",{attrs:{label:"商品名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s("0"==t.row.theme?"牛仔布":"1"==t.row.theme?"染色布":"针织布"))]}}])}),l("el-table-column",{attrs:{property:"quantity",label:"数量",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",[e._v(e._s(t.row.quantity))])]}}])}),l("el-table-column",{attrs:{property:"upQuantity",label:"上范围",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{autocomplete:"off",type:"number",min:"0"},model:{value:t.row.upQuantity,callback:function(l){e.$set(t.row,"upQuantity",l)},expression:"scope.row.upQuantity"}})]}}])}),l("el-table-column",{attrs:{property:"downQuantity",label:"下范围",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{autocomplete:"off",type:"number",min:"0"},model:{value:t.row.downQuantity,callback:function(l){e.$set(t.row,"downQuantity",l)},expression:"scope.row.downQuantity"}})]}}])}),l("el-table-column",{attrs:{label:"单位",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-select",{model:{value:t.row.unit,callback:function(l){e.$set(t.row,"unit",l)},expression:"scope.row.unit"}},[l("el-option",{attrs:{label:"码",value:"码"}}),l("el-option",{attrs:{label:"米",value:"米"}}),l("el-option",{attrs:{label:"KG",value:"KG"}}),l("el-option",{attrs:{label:"件",value:"件"}})],1)]}}])}),l("el-table-column",{attrs:{label:"单价",width:"120",property:"xsdj"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{autocomplete:"off",type:"number",min:"0"},model:{value:t.row.unitPrice,callback:function(l){e.$set(t.row,"unitPrice",l)},expression:"scope.row.unitPrice"}})]}}])}),l("el-table-column",{attrs:{label:"币种",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-select",{model:{value:t.row.moneyStyle,callback:function(l){e.$set(t.row,"moneyStyle",l)},expression:"scope.row.moneyStyle"}},[l("el-option",{attrs:{label:"RMB",value:"RMB"}}),l("el-option",{attrs:{label:"港币",value:"港币"}}),l("el-option",{attrs:{label:"美元",value:"美元"}})],1)]}}])}),l("el-table-column",{attrs:{label:"出口汇率",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{autocomplete:"off",placeholder:"3.5",disabled:!0},model:{value:t.row.exportRate,callback:function(l){e.$set(t.row,"exportRate",l)},expression:"scope.row.exportRate"}})]}}])}),l("el-table-column",{attrs:{label:"不出口汇率",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{autocomplete:"off",placeholder:"2.96",disabled:!0},model:{value:t.row.noExportRate,callback:function(l){e.$set(t.row,"noExportRate",l)},expression:"scope.row.noExportRate"}})]}}])}),l("el-table-column",{attrs:{property:"price",label:"金额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",[e._v(e._s(t.row.price=t.row.unitPrice*t.row.quantity))])]}}])}),l("el-table-column",{attrs:{label:"附加费",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{autocomplete:"off",type:"number",min:"0"},model:{value:t.row.etrMoney,callback:function(l){e.$set(t.row,"etrMoney",l)},expression:"scope.row.etrMoney"}})]}}])}),l("el-table-column",{attrs:{label:"项目费用",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{autocomplete:"off",type:"number",min:"0"},model:{value:t.row.programMoney,callback:function(l){e.$set(t.row,"programMoney",l)},expression:"scope.row.programMoney"}})]}}])}),l("el-table-column",{attrs:{label:"其他费用",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{autocomplete:"off",type:"number",min:"0"},model:{value:t.row.otherMonry,callback:function(l){e.$set(t.row,"otherMonry",l)},expression:"scope.row.otherMonry"}})]}}])})],1)],1),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:e.noClothClick}},[e._v("取消")]),l("el-button",{attrs:{type:"primary"},on:{click:e.zSpecialClothSave}},[e._v("保存")])],1),l("el-dialog",{attrs:{width:"80%",title:"选择布料",visible:e.noClothInTableVisible,"append-to-body":"",closeOnClickModal:e.closeOnClickModal,closeOnPressEscape:e.closeOnPressEscape},on:{"update:visible":function(t){e.noClothInTableVisible=t}}},[l("div",[l("div",[l("el-form",{ref:"formInline",staticClass:"demo-form-inline",attrs:{rules:e.rules,inline:!0,model:e.formInline}},[l("el-form-item",{attrs:{label:"布编",prop:"cloth"}},[l("el-input",{attrs:{autocomplete:"off",placeholder:"请输入布编"},model:{value:e.formInline.cloth,callback:function(t){e.$set(e.formInline,"cloth",t)},expression:"formInline.cloth"}})],1),l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addcheapcloth("formInline")}}},[e._v("查询")])],1)],1)],1),l("div",{staticClass:"clothtable1"},[l("el-table",{staticStyle:{width:"100%"},attrs:{border:e.border,"row-style":{height:"20px"},"cell-style":{padding:"0px"},data:e.specialclothlist},on:{"row-dblclick":e.switchSpecialCloth}},[l("el-table-column",{attrs:{type:"index",label:"序号"}}),l("el-table-column",{attrs:{property:"fabricCode",label:"布编"}}),l("el-table-column",{attrs:{property:"construstion",label:"组织"}}),l("el-table-column",{attrs:{property:"content",label:"成分"}}),l("el-table-column",{attrs:{property:"width",label:"布封"}}),l("el-table-column",{attrs:{label:"布重"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.beforeWash+"/"+t.row.afterWash))]}}])}),l("el-table-column",{attrs:{property:"colour",label:"颜色"}}),l("el-table-column",{attrs:{label:"商品名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s("0"==t.row.theme?"牛仔布":"1"==t.row.theme?"染色布":"针织布"))]}}])}),l("el-table-column",{attrs:{property:"unitPrice",label:"单价(码)"}})],1)],1)])])],1),l("el-dialog",{attrs:{title:"新建购销合同",visible:e.outerVisible,closeOnClickModal:e.closeOnClickModal,closeOnPressEscape:e.closeOnPressEscape,width:"80%"},on:{"update:visible":function(t){e.outerVisible=t}}},[l("div",{staticClass:"contract_con"},[l("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm2 form2",attrs:{model:e.ruleForm2,rules:e.rules,"label-width":"100px"}},[l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"存档编号"}},[l("el-input",{model:{value:e.ruleForm2.saveNo,callback:function(t){e.$set(e.ruleForm2,"saveNo",t)},expression:"ruleForm2.saveNo"}})],1)],1),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"销售类型"}},[l("el-select",{on:{change:e.saleStyle},model:{value:e.ruleForm2.saleStyle,callback:function(t){e.$set(e.ruleForm2,"saleStyle",t)},expression:"ruleForm2.saleStyle"}},[l("el-option",{attrs:{label:"内销合同",value:"内销合同"}}),l("el-option",{attrs:{label:"外销合同",value:"外销合同"}})],1)],1)],1),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"合同主体"}},[l("el-input",{attrs:{disabled:!0},model:{value:e.ruleForm2.contractBoby,callback:function(t){e.$set(e.ruleForm2,"contractBoby",t)},expression:"ruleForm2.contractBoby"}})],1)],1),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"布料分类"}},[l("el-select",{model:{value:e.ruleForm2.classify,callback:function(t){e.$set(e.ruleForm2,"classify",t)},expression:"ruleForm2.classify"}},[l("el-option",{attrs:{label:"牛仔布",value:"0"}}),l("el-option",{attrs:{label:"染色布",value:"1"}}),l("el-option",{attrs:{label:"针织布",value:"2"}})],1)],1)],1),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"客户"}},[l("el-select",{attrs:{"value-key":"ruleForm2.clientNo"},on:{change:e.selectcustomer},model:{value:e.ruleForm2.customer,callback:function(t){e.$set(e.ruleForm2,"customer",t)},expression:"ruleForm2.customer"}},e._l(e.customerlist,(function(t){return l("el-option",{key:t.value,attrs:{value:t,id:"item.clientNo"}},[e._v(e._s(t.clientName))])})),1)],1)],1),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"联系人"}},[l("el-input",{model:{value:e.ruleForm2.linkman,callback:function(t){e.$set(e.ruleForm2,"linkman",t)},expression:"ruleForm2.linkman"}})],1)],1),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"联系电话"}},[l("el-input",{model:{value:e.ruleForm2.linktel,callback:function(t){e.$set(e.ruleForm2,"linktel",t)},expression:"ruleForm2.linktel"}})],1)],1),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"结算方式"}},[l("el-input",{model:{value:e.ruleForm2.settlementMethod,callback:function(t){e.$set(e.ruleForm2,"settlementMethod",t)},expression:"ruleForm2.settlementMethod"}})],1)],1),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"合同编号"}},[l("el-input",{attrs:{placeholder:"自动生成",disabled:!0},model:{value:e.ruleForm2.contractNo,callback:function(t){e.$set(e.ruleForm2,"contractNo",t)},expression:"ruleForm2.contractNo"}})],1)],1),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"业务员"}},[l("el-select",{on:{change:e.changeSigner},model:{value:e.ruleForm2.signer,callback:function(t){e.$set(e.ruleForm2,"signer",t)},expression:"ruleForm2.signer"}},e._l(e.salesmanlist,(function(e){return l("el-option",{key:e.value,attrs:{label:e.cemployeeId,value:e.memployeeId}})})),1)],1)],1),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"路线选择"}},[l("el-select",{on:{change:e.changeLxHandle},model:{value:e.ruleForm2.route,callback:function(t){e.$set(e.ruleForm2,"route",t)},expression:"ruleForm2.route"}},e._l(e.freightlist,(function(e){return l("el-option",{key:e.value,attrs:{label:e.route,value:JSON.stringify(e)}})})),1)],1)],1),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"预运算单价"}},[l("el-input",{model:{value:e.ruleForm2.estimateFareUnitPrice,callback:function(t){e.$set(e.ruleForm2,"estimateFareUnitPrice",t)},expression:"ruleForm2.estimateFareUnitPrice"}})],1)],1),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"付款方式"}},[l("el-select",{model:{value:e.ruleForm2.payStyle,callback:function(t){e.$set(e.ruleForm2,"payStyle",t)},expression:"ruleForm2.payStyle"}},[l("el-option",{attrs:{label:"区域一",value:"shanghai"}}),l("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1)],1),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"税"}},[l("el-input",{attrs:{disabled:!0},model:{value:e.ruleForm2.fax,callback:function(t){e.$set(e.ruleForm2,"fax",t)},expression:"ruleForm2.fax"}})],1)],1),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"定金"}},[l("el-input-number",{attrs:{min:0,max:100},model:{value:e.ruleForm2.deposit,callback:function(t){e.$set(e.ruleForm2,"deposit",t)},expression:"ruleForm2.deposit"}})],1)],1),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"母合同"}},[l("el-input",{attrs:{disabled:!0},model:{value:e.ruleForm2.muContractNo,callback:function(t){e.$set(e.ruleForm2,"muContractNo",t)},expression:"ruleForm2.muContractNo"}})],1)],1),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"签约地点"}},[l("el-input",{model:{value:e.ruleForm2.signPlace,callback:function(t){e.$set(e.ruleForm2,"signPlace",t)},expression:"ruleForm2.signPlace"}})],1)],1),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"签约时间"}},[l("el-form-item",{attrs:{prop:"signDate"}},[l("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期",disabled:e.disabled},model:{value:e.ruleForm2.signDate,callback:function(t){e.$set(e.ruleForm2,"signDate",t)},expression:"ruleForm2.signDate"}})],1)],1)],1),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"品牌"}},[l("el-select",{model:{value:e.ruleForm2.brand,callback:function(t){e.$set(e.ruleForm2,"brand",t)},expression:"ruleForm2.brand"}},e._l(e.brandlist,(function(t){return l("el-option",{key:t.value,attrs:{value:t.brandName}},[e._v(e._s(t.brandName))])})),1)],1)],1),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"副牌"}},[l("el-select",{model:{value:e.ruleForm2.depbrand,callback:function(t){e.$set(e.ruleForm2,"depbrand",t)},expression:"ruleForm2.depbrand"}})],1)],1),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"中间商"}},[l("el-select",{model:{value:e.ruleForm2.broker,callback:function(t){e.$set(e.ruleForm2,"broker",t)},expression:"ruleForm2.broker"}},[l("el-option",{attrs:{label:"区域一",value:"shanghai"}}),l("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1)],1),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"相关订单"}},[l("el-select",{model:{value:e.ruleForm2.relatedOrder,callback:function(t){e.$set(e.ruleForm2,"relatedOrder",t)},expression:"ruleForm2.relatedOrder"}},[l("el-option",{attrs:{label:"区域一",value:"shanghai"}}),l("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1)],1),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"交货区域"}},[l("el-select",{model:{value:e.ruleForm2.deliveryArea,callback:function(t){e.$set(e.ruleForm2,"deliveryArea",t)},expression:"ruleForm2.deliveryArea"}},[l("el-option",{attrs:{label:"区域一",value:"shanghai"}}),l("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1)],1),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"交货地点"}},[l("el-input",{model:{value:e.ruleForm2.deliveryPlace,callback:function(t){e.$set(e.ruleForm2,"deliveryPlace",t)},expression:"ruleForm2.deliveryPlace"}})],1)],1),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"交货时间"}},[l("el-form-item",{attrs:{prop:"deliveryTime"}},[l("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","picker-options":e.pickerOptions},model:{value:e.ruleForm2.deliveryTime,callback:function(t){e.$set(e.ruleForm2,"deliveryTime",t)},expression:"ruleForm2.deliveryTime"}})],1)],1)],1),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"是否备货"}},[l("el-select",{model:{value:e.ruleForm2.choiceOrNot,callback:function(t){e.$set(e.ruleForm2,"choiceOrNot",t)},expression:"ruleForm2.choiceOrNot"}},[l("el-option",{attrs:{label:"是",value:"2"}}),l("el-option",{attrs:{label:"否",value:"1"}})],1)],1)],1),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"质量要求",prop:"qualityRequirment"}},[l("el-input",{attrs:{type:"textarea",resize:e.resize},model:{value:e.ruleForm2.qualityRequirment,callback:function(t){e.$set(e.ruleForm2,"qualityRequirment",t)},expression:"ruleForm2.qualityRequirment"}})],1)],1),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"备注",prop:"remarks"}},[l("el-input",{attrs:{type:"textarea",resize:e.resize},model:{value:e.ruleForm2.remarks,callback:function(t){e.$set(e.ruleForm2,"remarks",t)},expression:"ruleForm2.remarks"}})],1)],1),l("div",{directives:[{name:"show",rawName:"v-show",value:e.showwx,expression:"showwx"}],staticClass:"wxneed"},[l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"ShipmentTerm","label-width":"150px"}},[l("el-select",{model:{value:e.ruleForm2.shipmentTerms,callback:function(t){e.$set(e.ruleForm2,"shipmentTerms",t)},expression:"ruleForm2.shipmentTerms"}},[l("el-option",{attrs:{label:"是",value:"1"}}),l("el-option",{attrs:{label:"否",value:"2"}})],1)],1)],1),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"PartialShipment","label-width":"150px"}},[l("el-select",{model:{value:e.ruleForm2.partialShipment,callback:function(t){e.$set(e.ruleForm2,"partialShipment",t)},expression:"ruleForm2.partialShipment"}},[l("el-option",{attrs:{label:"是",value:"1"}}),l("el-option",{attrs:{label:"否",value:"2"}})],1)],1)],1),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"装运方式","label-width":"150px"}},[l("el-select",{model:{value:e.ruleForm2.loadStyle,callback:function(t){e.$set(e.ruleForm2,"loadStyle",t)},expression:"ruleForm2.loadStyle"}},[l("el-option",{attrs:{label:"是",value:"1"}}),l("el-option",{attrs:{label:"否",value:"2"}})],1)],1)],1),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"是否转运"}},[l("el-select",{model:{value:e.ruleForm2.changeLoad,callback:function(t){e.$set(e.ruleForm2,"changeLoad",t)},expression:"ruleForm2.changeLoad"}},[l("el-option",{attrs:{label:"是",value:"1"}}),l("el-option",{attrs:{label:"否",value:"2"}})],1)],1)],1),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"起运港"}},[l("el-select",{model:{value:e.ruleForm2.startPort,callback:function(t){e.$set(e.ruleForm2,"startPort",t)},expression:"ruleForm2.startPort"}},[l("el-option",{attrs:{label:"是",value:"1"}}),l("el-option",{attrs:{label:"否",value:"2"}})],1)],1)],1),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"目的港"}},[l("el-select",{model:{value:e.ruleForm2.endPort,callback:function(t){e.$set(e.ruleForm2,"endPort",t)},expression:"ruleForm2.endPort"}},[l("el-option",{attrs:{label:"是",value:"1"}}),l("el-option",{attrs:{label:"否",value:"2"}})],1)],1)],1),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"装运次数"}},[l("el-input",{attrs:{type:"number",min:"0"},model:{value:e.ruleForm2.loadTime,callback:function(t){e.$set(e.ruleForm2,"loadTime",t)},expression:"ruleForm2.loadTime"}})],1)],1)],1),l("el-col",{attrs:{span:24}},[l("div",{staticClass:"mhttj"},[l("el-button",{staticClass:"submitmht",attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm2")}}},[e._v("提交")])],1)])],1)],1)]),l("el-dialog",{attrs:{title:"合同编辑",visible:e.childModifyVisible,closeOnClickModal:e.closeOnClickModal,closeOnPressEscape:e.closeOnPressEscape,width:"80%"},on:{"update:visible":function(t){e.childModifyVisible=t}}},[l("div",{staticClass:"clothtable1"},[l("el-table",{staticStyle:{width:"100%"},attrs:{border:e.border,"row-style":{height:"20px"},"cell-style":{padding:"0px"},data:e.editorlist}},[l("el-table-column",{attrs:{type:"index",label:"序号"}}),l("el-table-column",{attrs:{property:"clothId",label:"布编"}}),l("el-table-column",{attrs:{property:"zuzhi",label:"组织"}}),l("el-table-column",{attrs:{property:"chengfen",label:"成分"}}),l("el-table-column",{attrs:{property:"bufeng",label:"布封"}}),l("el-table-column",{attrs:{label:"布重"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.buzhong))]}}])}),l("el-table-column",{attrs:{property:"color",label:"颜色"}}),l("el-table-column",{attrs:{label:"商品名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s("0"==t.row.theme?"牛仔布":"1"==t.row.theme?"染色布":"针织布"))]}}])}),l("el-table-column",{attrs:{property:"quantity",label:"数量",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{autocomplete:"off",disabled:"1"==t.row.bargain},model:{value:t.row.quantity,callback:function(l){e.$set(t.row,"quantity",l)},expression:"scope.row.quantity"}})]}}])}),l("el-table-column",{attrs:{property:"upQuantity",label:"上范围",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{autocomplete:"off",type:"number",min:"0"},model:{value:t.row.upQuantity,callback:function(l){e.$set(t.row,"upQuantity",l)},expression:"scope.row.upQuantity"}})]}}])}),l("el-table-column",{attrs:{property:"downQuantity",label:"下范围",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{autocomplete:"off",type:"number",min:"0"},model:{value:t.row.downQuantity,callback:function(l){e.$set(t.row,"downQuantity",l)},expression:"scope.row.downQuantity"}})]}}])}),l("el-table-column",{attrs:{label:"单位",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-select",{model:{value:t.row.unit,callback:function(l){e.$set(t.row,"unit",l)},expression:"scope.row.unit"}},[l("el-option",{attrs:{label:"码",value:"码"}}),l("el-option",{attrs:{label:"米",value:"米"}}),l("el-option",{attrs:{label:"KG",value:"KG"}}),l("el-option",{attrs:{label:"件",value:"件"}})],1)]}}])}),l("el-table-column",{attrs:{label:"单价",width:"120",property:"xsdj"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{autocomplete:"off",type:"number",min:"0"},model:{value:t.row.unitPrice,callback:function(l){e.$set(t.row,"unitPrice",l)},expression:"scope.row.unitPrice"}})]}}])}),l("el-table-column",{attrs:{label:"币种",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-select",{model:{value:t.row.moneyStyle,callback:function(l){e.$set(t.row,"moneyStyle",l)},expression:"scope.row.moneyStyle"}},[l("el-option",{attrs:{label:"RMB",value:"RMB"}}),l("el-option",{attrs:{label:"港币",value:"港币"}}),l("el-option",{attrs:{label:"美元",value:"美元"}})],1)]}}])}),l("el-table-column",{attrs:{label:"出口汇率",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{autocomplete:"off",placeholder:"3.5",disabled:!0},model:{value:t.row.exportRate,callback:function(l){e.$set(t.row,"exportRate",l)},expression:"scope.row.exportRate"}})]}}])}),l("el-table-column",{attrs:{label:"不出口汇率",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{autocomplete:"off",placeholder:"2.96",disabled:!0},model:{value:t.row.noExportRate,callback:function(l){e.$set(t.row,"noExportRate",l)},expression:"scope.row.noExportRate"}})]}}])}),l("el-table-column",{attrs:{property:"price",label:"金额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",[e._v(e._s(t.row.price=t.row.unitPrice*t.row.quantity))])]}}])}),l("el-table-column",{attrs:{label:"附加费",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{autocomplete:"off",type:"number",min:"0"},model:{value:t.row.etrMoney,callback:function(l){e.$set(t.row,"etrMoney",l)},expression:"scope.row.etrMoney"}})]}}])}),l("el-table-column",{attrs:{label:"项目费用",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{autocomplete:"off",type:"number",min:"0"},model:{value:t.row.programMoney,callback:function(l){e.$set(t.row,"programMoney",l)},expression:"scope.row.programMoney"}})]}}])}),l("el-table-column",{attrs:{label:"其他费用",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{autocomplete:"off",type:"number",min:"0"},model:{value:t.row.otherMonry,callback:function(l){e.$set(t.row,"otherMonry",l)},expression:"scope.row.otherMonry"}})]}}])})],1)],1),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:e.saveCancleClick}},[e._v("取消")]),l("el-button",{attrs:{type:"primary"},on:{click:e.saveClothmsg}},[e._v("保存")])],1)])],1)},a=[],r=(l("7db0"),l("caad"),l("d81d"),l("ac1f"),l("2532"),l("1276"),l("751a")),n=function(e){return Object(r["a"])({url:"/ERP/selectContractBywhere",method:"post",data:e})},i=function(e){return Object(r["a"])({url:"/ERP/selbudget",method:"get",params:e})},s=function(e){return Object(r["a"])({url:"/ERP/selClientbyemployeeId",method:"get",params:e})},c=function(e){return Object(r["a"])({url:"/ERP/selrelation",method:"get",params:e})},u=function(e){return Object(r["a"])({url:"/ERP/selClient",method:"get",params:e})},m=function(e){return Object(r["a"])({url:"/ERP/judgeClient",method:"get",params:e})},p=function(e){return Object(r["a"])({url:"http://120.78.186.60:8084/FabricService/api/getDatalikeBbh",method:"post",data:e})},d=function(e){return Object(r["a"])({url:"/ERP/selbargain",method:"get",params:e})},b=function(e){return Object(r["a"])({url:"/ERP/addContract",method:"post",data:e})},f=function(e){return Object(r["a"])({url:"/ERP/addContractCloth",method:"post",headers:{"content-type":"application/json"},data:e})},h=function(e){return Object(r["a"])({url:"/ERP/addApproveTotal",method:"post",data:e})},y=function(e){return Object(r["a"])({url:"/ERP/getCloth",method:"get",params:e})},g=function(e){return Object(r["a"])({url:"/ERP/editZhanWei",method:"post",data:e})},v=function(e){return Object(r["a"])({url:"/ERP/EditSymbol",method:"post",data:e})},w=function(e){return Object(r["a"])({url:"/ERP/delCloth",method:"post",data:e})},k=function(e){return Object(r["a"])({url:"/ERP/JudgeCloth",method:"post",data:e})},F=function(e){return Object(r["a"])({url:"/ERP/EditCloth",method:"post",data:e})},x=function(e){return Object(r["a"])({url:"/ERP/judgeEdit",method:"post",data:e})},C=function(e){return Object(r["a"])({url:"/ERP/getContractByPasyStyle",method:"get",params:e})},S=function(e){return Object(r["a"])({url:"/ERP/EditContract",method:"post",data:e})},_=function(e){return Object(r["a"])({url:"/ERP/JudgeAdd",method:"post",data:e})},$=function(e){return Object(r["a"])({url:"/ERP/LookPDF",method:"post",data:e})},O=function(e){return Object(r["a"])({url:"/ERP/selectContractBywhere",method:"post",data:e})},N=l("b383"),M=l.n(N),P={name:"nxht",data:function(){return{id:"",name:"",allData:"",submitStatus:"",selectConstract:"",routeSelect:"",input:"",resize:"none",isClick:!1,disabled:!0,showwx:!1,border:!0,closeOnClickModal:!1,closeOnPressEscape:!1,outerVisible:!1,clothOutTableVisible:!1,clothInTableVisible:!1,noClothOutTableVisible:!1,noClothInTableVisible:!1,childModifyVisible:!1,parentModifyVisible:!1,formInline:{cloth:""},ruleForm:{signDate_1:"",signDate_2:"",customer:"",contractNo:"",clothId:""},ruleForm2:{contractNo:"",customer:"",choiceOrNot:"",signer:"",person:"",saleStyle:"",saveNo:"",brand:"",estimateFareUnitPrice:"",route:"",payStyle:"",contractBoby:"韶关市北纺制造科技有限公司",classify:"",customerNo:"",fax:"",deposit:"0",signPlace:"",signDate:"",depbrand:"",broker:"",relatedOrder:"",deliveryArea:"",deliveryPlace:"",deliveryTime:"",qualityRequirment:"",remarks:"",style:"购销合同",linkman:"",linktel:"",settlementMethod:"",loadTime:"0",shipmentTerms:"",partialShipment:"",loadStyle:"",changeLoad:"",startPort:"",endPort:"",symbol:"0",bargain:"-1",updateTime:"",customerContractNo:""},freightlist:{guid:"",indate:"",moneyStyle:"",orderNo:"",pOption:"",route:"",unit:""},rules:{cloth:[{required:!0,message:"布编不能为空",trigger:"blur"}],deposit:[{required:!0,message:"不能小于0",trigger:"blur"}]},pickerOptions:{disabledDate:function(e){return e.getTime()<Date.now()-864e5}},tableData:[],tableData2:[],basislist:[],customerlist:[],brandlist:[],salesmanlist:[],clothlist:[],clothtablelist:[],specialclothlist:[],specialtablelist:[],editorlist:[]}},methods:{dataClick:function(){var e=this.allData[0],t=this.allData[1],l=e.getFullYear()+"-"+this.p(e.getMonth()+1)+"-"+this.p(e.getDate()),o=t.getFullYear()+"-"+this.p(t.getMonth()+1)+"-"+this.p(t.getDate());this.$set(this.ruleForm,"signDate_1",l),this.$set(this.ruleForm,"signDate_2",o)},contractSearchForm:function(){var e=this;this.$refs["ruleForm"].validate((function(t){if(!t)return!1;var l=e.ruleForm;O(M.a.stringify(l)).then((function(t){e.tableData=t.data})).catch((function(e){console.log(e)}))}))},contractResetForm:function(){this.ruleForm=JSON.parse(JSON.stringify(this.defaultForm)),this.allData="",this.tableList()},contractDetail:function(e){var t=this,l={condition:"where contractNo='"+e+"'"};C(l).then((function(e){t.freight(),t.Customer(),t.Salesman();var l=new Date,o=l.getFullYear()+"-"+t.p(l.getMonth()+1)+"-"+t.p(l.getDate()),a=t.p(l.getHours())+":"+t.p(l.getMinutes())+":"+t.p(l.getSeconds());t.ruleForm2.signDate=o+" "+a,t.ruleForm2.updateTime=o+" "+a,t.outerVisible=!0,t.ruleForm2=Object.assign(t.ruleForm2,e.data[0])})).catch((function(e){console.log(e)}))},editorClick:function(e){var t=this;this.submitStatus=2;var l={contractNo:e.contractNo};x(M.a.stringify(l)).then((function(l){200==l.code?t.contractDetail(e.contractNo):t.$message({message:l.msg,duration:2e3})})).catch((function(e){console.log(e)}))},saveCancleClick:function(){this.childModifyVisible=!1},saveClothmsg:function(){var e=this,t=this.editorlist[0],l=this.selectConstract;F(M.a.stringify(t)).then((function(t){e.$message({message:t.msg,duration:2e3}),e.childModifyVisible=!1,e.tableList(),e.refreshZContract(l)})).catch((function(e){console.log(e)}))},zEditorClick:function(e){var t=this;this.editorlist=[];var l={contractNo:e.contractNo,guid:e.guid};k(M.a.stringify(l)).then((function(l){303==l.code&&t.$message({message:l.msg,duration:2e3}),302==l.code&&t.$message({message:l.msg,duration:2e3}),200==l.code&&t.editorClothMsg(e.contractNo,e.guid)})).catch((function(e){console.log(e)}))},editorClothMsg:function(e,t){var l=this,o={contractNo:e,guid:t};y(o).then((function(e){l.childModifyVisible=!0,l.editorlist=e.data})).catch((function(e){console.log(e)}))},zDeleteClick:function(e){var t=this;this.$confirm("确认删除该条布料信息?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var l={contractNo:e.contractNo,guid:e.guid};w(M.a.stringify(l)).then((function(e){if(200==e.code){var l=t.selectConstract;t.refreshZContract(l)}else t.$message({message:e.msg,duration:2e3})})).catch((function(e){console.log(e)}))})).catch((function(){}))},finishClick:function(e){var t=this,l={symbol:50,contractNo:e.contractNo};v(M.a.stringify(l)).then((function(e){t.$message({message:"合同已完结",duration:2e3}),t.tableList()})).catch((function(e){console.log(e)}))},refreshZContract:function(e){var t=this,l={contractNo:e};y(l).then((function(e){t.tableData2=e.data})).catch((function(e){console.log(e)}))},zClothSave:function(){var e=this,t=this.clothtablelist,l=this.selectConstract;f(t).then((function(t){e.$message({message:t.msg,duration:2e3}),e.clothOutTableVisible=!1,e.tableList(),e.refreshZContract(l)})).catch((function(e){console.log(e)}))},zSpecialClothSave:function(){var e=this;this.specialtablelist[0].clothGuid=this.specialtablelist[0].guid;var t=this.specialtablelist,l=this.selectConstract;f(t).then((function(t){200==t.code?(e.$message({message:t.msg,duration:2e3}),e.noClothOutTableVisible=!1,e.tableList(),e.refreshZContract(l),e.specialClothOccupies(e.specialtablelist[0].clothGuid)):e.$message({message:t.msg,duration:2e3})})).catch((function(e){console.log(e)}))},cheapClothQuery:function(){this.noClothInTableVisible=!0,this.formInline={},this.specialclothlist=[],this.specialtablelist.length&&(this.$message({message:"只可以选择一个特价布",duration:2e3}),this.noClothInTableVisible=!1)},clothQuery:function(){this.clothInTableVisible=!0,this.formInline={},this.clothlist=[]},switchCloth:function(e){if(this.clothtablelist.map((function(e){return e.fabricCode})).includes(e.fabricCode))this.$message({message:"不可选相同布编布料",duration:2e3});else{var t=JSON.parse(JSON.stringify(e));Object.assign(t,{contractNo:this.selectConstract,orderNo:"2",quantity:"0",upQuantity:"0",downQuantity:"0",unit:"码",unitPrice:"",moneyStyle:"RMB",exportRate:"3.5",noExportRate:"2.96",price:"",etrMoney:"0",programMoney:"0",bargain:"0",otherMonry:"0",payTime:"",hcustomNo:null,clothId:e.fabricCode,zuzhi:e.construstion,chengfen:e.content,bufeng:e.width,buzhong:e.beforeWash+"/"+e.afterWash,color:e.colour}),this.clothtablelist.push(t),t.unitPrice=t.xsdj,this.clothInTableVisible=!1}},specialClothOccupies:function(e){var t={zhanWei:1,condition:e};g(M.a.stringify(t)).then((function(e){})).catch((function(e){console.log(e)}))},switchSpecialCloth:function(e){var t=JSON.parse(JSON.stringify(e));Object.assign(t,{contractNo:this.selectConstract,orderNo:"2",quantity:"0",upQuantity:"0",downQuantity:"0",unit:"码",unitPrice:"",moneyStyle:"RMB",exportRate:"3.5",noExportRate:"2.96",price:"",etrMoney:"0",programMoney:"0",bargain:"1",otherMonry:"0",payTime:"",hcustomNo:null,clothId:e.fabricCode,zuzhi:e.construstion,chengfen:e.content,bufeng:e.width,buzhong:e.beforeWash+"/"+e.afterWash,color:e.colour,clothGuid:""}),this.specialtablelist.push(t),t.unitPrice=e.unitPrice,this.noClothInTableVisible=!1},saleStyle:function(e){"外销合同"==e?(this.ruleForm2.fax="出口",this.showwx=!0):(this.ruleForm2.fax="含税",this.showwx=!1)},changeSigner:function(e){var t={};t=this.salesmanlist.find((function(t){return t.memployeeId===e})),this.ruleForm2.signer=t.memployeeId},submitForm:function(){var e=this;1==this.submitStatus?this.ruleForm2.signer?this.$refs["ruleForm2"].validate((function(t){if(!t)return e.$message({message:"提交失败",duration:1500}),!1;var l=new Date(e.ruleForm2.deliveryTime);e.ruleForm2.deliveryTime=l.getFullYear()+"-"+e.p(l.getMonth()+1)+"-"+e.p(l.getDate());e.p(l.getHours()),e.p(l.getMinutes()),e.p(l.getSeconds());e.ruleForm2.route=JSON.parse(e.ruleForm2.route).route;var o=sessionStorage.getItem("id");e.ruleForm2.person=o;var a=e.ruleForm2;b(a).then((function(t){e.$message({message:t.msg,duration:2e3}),e.outerVisible=!1,e.tableList()})).catch((function(e){console.log(e)}))})):this.$message({message:"请选择业务员",duration:1500}):this.$refs["ruleForm2"].validate((function(t){if(!t)return e.$message({message:"提交失败",duration:1500}),!1;var l=new Date(e.ruleForm2.deliveryTime);e.ruleForm2.deliveryTime=l.getFullYear()+"-"+e.p(l.getMonth()+1)+"-"+e.p(l.getDate());e.p(l.getHours()),e.p(l.getMinutes()),e.p(l.getSeconds());var o={};o=e.salesmanlist.find((function(t){return t.memployeeId===e.ruleForm2.signer})),e.ruleForm2.signer=o.memployeeId;var a=e.ruleForm2;S(a).then((function(t){e.$message({message:t.msg,duration:2e3}),e.outerVisible=!1,e.tableList()})).catch((function(e){console.log(e)}))}))},p:function(e){return e<10?"0"+e:e},addcloth:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;var l={fabricCode:t.formInline.cloth,pageSize:"50",pageNum:"1"};p(M.a.stringify(l)).then((function(e){t.clothlist=e.data})).catch((function(e){console.log(e)}))}))},addcheapcloth:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;var l={style:"布",id:t.formInline.cloth,state:1};d(l).then((function(e){t.specialclothlist=e.data,301==e.code&&t.$message({message:e.msg,duration:2e3})})).catch((function(e){console.log(e)}))}))},addcontract:function(){this.ruleForm2=JSON.parse(JSON.stringify(this.defaultForm2)),this.outerVisible=!0,this.submitStatus=1;var e=new Date,t=e.getFullYear()+"-"+this.p(e.getMonth()+1)+"-"+this.p(e.getDate()),l=this.p(e.getHours())+":"+this.p(e.getMinutes())+":"+this.p(e.getSeconds());this.ruleForm2.signDate=t+" "+l,this.ruleForm2.updateTime=t+" "+l,this.freight(),this.Customer(),this.Salesman()},addcontract2:function(){var e=this;if(1==this.isClick){var t={contractNo:this.selectConstract};_(M.a.stringify(t)).then((function(t){200==t.code?(e.clothOutTableVisible=!0,e.clothtablelist=[]):e.$message({message:t.msg,duration:2e3})})).catch((function(e){console.log(e)}))}else this.$message({message:"请先选择母合同",duration:2e3})},addcontract3:function(){var e=this;if(1==this.isClick){var t={contractNo:this.selectConstract};_(M.a.stringify(t)).then((function(t){200==t.code?(e.noClothOutTableVisible=!0,e.specialclothlist=[],e.specialtablelist=[]):e.$message({message:t.msg,duration:2e3})})).catch((function(e){console.log(e)}))}else this.$message({message:"请先选择母合同",duration:2e3})},freight:function(){var e=this;i().then((function(t){e.freightlist=t.data})).catch((function(e){console.log(e)}))},changeLxHandle:function(){this.ruleForm2.estimateFareUnitPrice=JSON.parse(this.ruleForm2.route).unit},Customer:function(){var e=this,t={employeeId:10001};s(t).then((function(t){e.customerlist=t.data})).catch((function(e){console.log(e)}))},Salesman:function(){var e=this,t={CemployeeId:10010};c(t).then((function(t){e.salesmanlist=t.data})).catch((function(e){console.log(e)}))},allclick:function(e){var t=this;this.isClick=!0,this.selectConstract=e.contractNo;var l={contractNo:e.contractNo};y(l).then((function(e){t.tableData2=e.data})).catch((function(e){console.log(e)}))},approvalClick:function(e){var t=this;if(this.tableData2){if(0!==this.tableData2.length){var l=sessionStorage.getItem("id"),o=sessionStorage.getItem("name"),a=sessionStorage.getItem("contractBody"),r={approveStyle:"1",contractNo:e.contractNo,relateNo:e.contractNo,personName:o,personId:l,contractBody:a};h(M.a.stringify(r)).then((function(e){"200"==e.code&&(t.tableList(),t.$message({message:"提交审批成功",duration:1500})),"302"==e.code&&(t.tableList(),t.$message({message:"审批添加失败",duration:1500})),"305"==e.code&&(t.tableList(),t.$message({message:"未配置当前审批",duration:1500})),"306"==e.code&&(t.tableList(),t.$message({message:e.msg,duration:1500}))})).catch((function(e){console.log(e)}))}}else this.$message({message:"请填写合同布料信息",duration:2e3})},seeClick:function(e){var t={contractNo:e.contractNo},l=window.location.href,o=l.split("ERP",1)+"ERP";$(M.a.stringify(t)).then((function(e){window.open(o+e)})).catch((function(e){console.log(e)}))},tableList:function(){var e=this,t={symbol:50,choiceOrNot:1};n(t).then((function(t){e.tableData=t.data})).catch((function(e){console.log(e)}))},selectcustomer:function(e){var t=e;this.ruleForm2.customer=e.clientName;var l={clientNo:t.clientNo};this.ruleForm2.customerNo=t.clientNo,this.ruleForm2.customerContractNo=t.clientNo,this.Customeractive(l);var o={clientName:t.clientName};this.Customerinfo(o)},Customerinfo:function(e){var t=this;u(e).then((function(e){var l=e.data[0],o=l.linkman,a=l.linktel,r=l.settlementMethod;t.$set(t.ruleForm2,"linkman",o),t.$set(t.ruleForm2,"linktel",a),t.$set(t.ruleForm2,"settlementMethod",r);var n=e.data[0].clientBrands;t.brandlist=n})).catch((function(e){console.log(e)}))},Customeractive:function(e){var t=this;m(e).then((function(e){t.Customeractivelist=e.data})).catch((function(e){t.$message({message:"客户不活跃",duration:1500})}))},noClothClick:function(){this.noClothOutTableVisible=!1},handleDialogClose:function(){this.noClothOutTableVisible=!1}},created:function(){this.defaultForm=JSON.parse(JSON.stringify(this.ruleForm)),this.defaultForm2=JSON.parse(JSON.stringify(this.ruleForm2)),this.tableList()},mounted:function(){}},R=P,E=(l("eb9c"),l("2877")),I=Object(E["a"])(R,o,a,!1,null,"7f11135a",null);t["default"]=I.exports}}]);