(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e0adce8"],{"5ffa":function(e,t,l){},"78dc":function(e,t,l){"use strict";l.d(t,"h",(function(){return o})),l.d(t,"i",(function(){return a})),l.d(t,"f",(function(){return s})),l.d(t,"g",(function(){return n})),l.d(t,"a",(function(){return i})),l.d(t,"b",(function(){return c})),l.d(t,"j",(function(){return u})),l.d(t,"e",(function(){return p})),l.d(t,"k",(function(){return m})),l.d(t,"c",(function(){return d})),l.d(t,"d",(function(){return f}));var r=l("751a"),o=function(e){return Object(r["a"])({url:"/ERP/searchApproveStyle",method:"get",params:e})},a=function(e){return Object(r["a"])({url:"/ERP/selectApproveOrder",method:"get",params:e})},s=function(e){return Object(r["a"])({url:"/ERP/selectEmplyee",method:"post",data:e})},n=function(e){return Object(r["a"])({url:"/ERP/addApproveOrder",method:"post",data:e})},i=function(e){return Object(r["a"])({url:"/ERP/editCopy",method:"post",data:e})},c=function(e){return Object(r["a"])({url:"/ERP/selApproveTotal",method:"post",data:e})},u=function(e){return Object(r["a"])({url:"/ERP/delApproveOrder",method:"post",data:e})},p=function(e){return Object(r["a"])({url:"/ERP/selectApproveOrder",method:"get",params:e})},m=function(e){return Object(r["a"])({url:"/ERP/editApproveOrder",method:"post",data:e})},d=function(e){return Object(r["a"])({url:"/ERP/agreeApprove",method:"post",data:e})},f=function(e){return Object(r["a"])({url:"/ERP/disagreeApprove",method:"post",data:e})}},"7db0":function(e,t,l){"use strict";var r=l("23e7"),o=l("b727").find,a=l("44d2"),s=l("ae40"),n="find",i=!0,c=s(n);n in[]&&Array(1)[n]((function(){i=!1})),r({target:"Array",proto:!0,forced:i||!c},{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),a(n)},aef1:function(e,t,l){"use strict";var r=l("5ffa"),o=l.n(r);o.a},c48f:function(e,t,l){"use strict";l.r(t);var r=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("span",[e._v("类型：")]),l("el-select",{attrs:{placeholder:"请选择"},on:{change:e.switchType},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.optionslist,(function(e){return l("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),l("div",{staticClass:"addTypeApproval",on:{click:e.addTypeApproval}},[l("i",{staticClass:"el-icon-circle-plus-outline"}),e._v(" 新增 ")]),l("el-table",{staticStyle:{width:"100%"},attrs:{data:e.typeApprovalProcesslist,border:e.border,"max-height":"530","row-style":{height:"20px"},"cell-style":{padding:"0px"}}},[l("el-table-column",{attrs:{type:"index",label:"序号",align:"center"}}),l("el-table-column",{attrs:{property:"style",label:"类型",align:"center"}}),l("el-table-column",{attrs:{property:"name",label:"名称",align:"center"}}),l("el-table-column",{attrs:{property:"role",label:"部门",align:"center"}}),l("el-table-column",{attrs:{property:"personName",label:"姓名",align:"center"}}),l("el-table-column",{attrs:{property:"state",label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",[e._v(" "+e._s("1"==t.row.state?"启用":"停用")+" ")])]}}])}),l("el-table-column",{attrs:{property:"copyName",label:"抄送人",align:"center"}}),l("el-table-column",{attrs:{property:"address",label:"操作",align:"center",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{staticStyle:{margin:"2px"},attrs:{type:"success",size:"mini"},nativeOn:{click:function(l){return e.editorClick(t.row)}}},[e._v("编辑")]),l("el-button",{attrs:{type:"primary",size:"mini"},nativeOn:{click:function(l){return e.addCopy(t.row)}}},[e._v("增加抄送")]),l("el-button",{attrs:{type:"danger",size:"mini"},nativeOn:{click:function(l){return e.delClick(t.row)}}},[e._v("删除")])]}}])})],1),l("el-dialog",{attrs:{title:"流程新增",width:"50%",visible:e.processOuterVisible,closeOnClickModal:e.closeOnClickModal,closeOnPressEscape:e.closeOnPressEscape},on:{"update:visible":function(t){e.processOuterVisible=t}}},[l("div",[l("el-form",{ref:"ruleForm",staticClass:"form3",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"120px"}},[l("el-form-item",{attrs:{label:"序号"}},[l("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.ruleForm.orderNo,callback:function(t){e.$set(e.ruleForm,"orderNo",t)},expression:"ruleForm.orderNo"}})],1),l("el-form-item",{attrs:{label:"类型"}},[l("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:e.ruleForm.style,callback:function(t){e.$set(e.ruleForm,"style",t)},expression:"ruleForm.style"}})],1),l("el-form-item",{attrs:{label:"名称",prop:"name"}},[l("el-input",{staticStyle:{width:"200px"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),l("el-form-item",{attrs:{label:"岗位"}},[l("el-input",{staticStyle:{width:"200px"},on:{focus:e.jobsClick},model:{value:e.ruleForm.role,callback:function(t){e.$set(e.ruleForm,"role",t)},expression:"ruleForm.role"}})],1),l("el-form-item",{attrs:{label:"人员"}},[l("el-input",{staticStyle:{width:"200px"},on:{focus:e.jobsClick},model:{value:e.ruleForm.personName,callback:function(t){e.$set(e.ruleForm,"personName",t)},expression:"ruleForm.personName"}})],1),l("el-form-item",{attrs:{label:"状态"}},[l("el-select",{model:{value:e.ruleForm.state,callback:function(t){e.$set(e.ruleForm,"state",t)},expression:"ruleForm.state"}},e._l(e.statelist,(function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),l("el-form-item",{staticClass:"sub1"},[l("el-button",{staticStyle:{width:"95px"},on:{click:e.closeOuterVisible}},[e._v("取消")]),l("el-button",{staticStyle:{width:"95px"},attrs:{type:"primary"},on:{click:function(t){return e.submitProcess("ruleForm")}}},[e._v("提交")])],1)],1)],1),l("el-dialog",{attrs:{width:"50%",title:"岗位选择",visible:e.processInnerVisible,closeOnClickModal:e.closeOnClickModal,closeOnPressEscape:e.closeOnPressEscape,"append-to-body":""},on:{"update:visible":function(t){e.processInnerVisible=t}}},[l("div",{staticClass:"post_top"},[l("el-select",{attrs:{disabled:""},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}},e._l(e.postlist,(function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),l("el-form",{ref:"searchname",staticStyle:{marginLeft:"15px"},attrs:{rules:e.rules,inline:!0,model:e.searchname}},[l("el-form-item",{attrs:{label:"搜索框",prop:"employeeName"}},[l("el-input",{attrs:{autocomplete:"off",placeholder:"请输入名称"},model:{value:e.searchname.employeeName,callback:function(t){e.$set(e.searchname,"employeeName",t)},expression:"searchname.employeeName"}})],1),l("el-form-item",[l("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.searchName("searchname")}}},[e._v("查询")])],1)],1)],1),l("div",{staticClass:"post_bottom"},[l("el-table",{staticStyle:{width:"100%"},attrs:{data:e.personInfolist,border:e.border,"row-style":{height:"20px"},"cell-style":{padding:"0px"}},on:{"row-dblclick":e.switchPersonInfo}},[l("el-table-column",{attrs:{type:"index",label:"序号",align:"center"}}),l("el-table-column",{attrs:{property:"employeeId",label:"编号",align:"center"}}),l("el-table-column",{attrs:{property:"employeeName",label:"姓名",align:"center"}}),l("el-table-column",{attrs:{property:"department",label:"部门",align:"center"}}),l("el-table-column",{attrs:{property:"duty",label:"岗位",align:"center"}})],1)],1)])],1),l("el-dialog",{attrs:{title:"增加抄送人",visible:e.addCopyVisible,width:"50%",closeOnClickModal:e.closeOnClickModal,closeOnPressEscape:e.closeOnPressEscape},on:{"update:visible":function(t){e.addCopyVisible=t}}},[l("div",{staticClass:"copy_top"},[l("el-form",{ref:"searchname",attrs:{rules:e.rules,inline:!0,model:e.searchname}},[l("el-form-item",{attrs:{label:"搜索框",prop:"employeeName"}},[l("el-input",{attrs:{autocomplete:"off",placeholder:"请输入名称"},model:{value:e.searchname.employeeName,callback:function(t){e.$set(e.searchname,"employeeName",t)},expression:"searchname.employeeName"}})],1),l("el-form-item",[l("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.searchName("searchname")}}},[e._v("查询")])],1)],1)],1),l("div",{staticClass:"copy_bottom"},[l("el-table",{staticStyle:{width:"100%"},attrs:{data:e.personInfolist,border:e.border,"row-style":{height:"20px"},"cell-style":{padding:"0px"}},on:{"row-dblclick":e.switchCopyPerson}},[l("el-table-column",{attrs:{type:"index",label:"序号",align:"center"}}),l("el-table-column",{attrs:{property:"employeeId",label:"编号",align:"center"}}),l("el-table-column",{attrs:{property:"employeeName",label:"姓名",align:"center"}}),l("el-table-column",{attrs:{property:"department",label:"部门",align:"center"}}),l("el-table-column",{attrs:{property:"duty",label:"岗位",align:"center"}})],1)],1)])],1)},o=[],a=(l("7db0"),l("b0c0"),l("78dc")),s=l("b383"),n=l.n(s),i={name:"spsz",data:function(){return{statelist:[{value:1,label:"启用"},{value:2,label:"停用"}],postlist:[{value:"1",label:"按照角色"},{value:"2",label:"按照组织架构"},{value:"3",label:"按照名称"}],optionslist:[],typeApprovalProcesslist:[],contractList:[],selectStatus:"",value:"",value1:"3",border:!0,processOuterVisible:!1,processInnerVisible:!1,closeOnClickModal:!1,closeOnPressEscape:!1,addCopyVisible:!1,ruleForm:{name:"",personId:"",role:"",personName:"",state:"1",orderNo:"",style:"",copyId:"",copyName:""},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],employeeName:[{required:!0,message:"名称不能为空",trigger:"blur"}]},searchname:{employeeName:""},personInfolist:[]}},methods:{editorClick:function(e){var t=this;this.personInfolist=[],this.searchname.employeeName="",this.selectStatus="2";var l={guid:e.guid};a["e"](l).then((function(e){t.processOuterVisible=!0,t.ruleForm=e.data[0]})).catch((function(e){console.log(e)}))},delClick:function(e){var t=this;this.$confirm("确认删除该条审批配置?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var l={guid:e.guid};a["j"](n.a.stringify(l)).then((function(e){t.typeApprovalProcess(t.ruleForm.id),t.$message({message:"删除成功",duration:1500})})).catch((function(e){console.log(e)}))})).catch((function(){}))},switchCopyPerson:function(e){var t=this,l={copyId:this.ruleForm.copyId+" "+e.employeeId,copyName:this.ruleForm.copyName+" "+e.employeeName,style:this.ruleForm.style};a["a"](n.a.stringify(l)).then((function(e){t.typeApprovalProcess(t.ruleForm.style),t.typeApprovalProcess(t.ruleForm.id),t.$message({message:"添加成功",duration:1500}),t.addCopyVisible=!1})).catch((function(e){console.log(e)}))},addCopy:function(e){this.addCopyVisible=!0,this.ruleForm.copyId=e.copyId,this.ruleForm.copyName=e.copyName},switchPersonInfo:function(e){this.ruleForm.role=e.duty,this.ruleForm.personName=e.employeeName,this.ruleForm.personId=e.employeeId,this.processInnerVisible=!1},searchName:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;var l={symbol:1,employeeName:t.searchname.employeeName};a["f"](n.a.stringify(l)).then((function(e){"301"==e.code&&t.$message({message:"没有查到所需要的信息",duration:1500}),t.personInfolist=e.data})).catch((function(e){console.log(e)}))}))},closeOuterVisible:function(){this.processOuterVisible=!1},jobsClick:function(){this.processInnerVisible=!0},submitProcess:function(e){var t=this;(this.selectStatus="1")?this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;a["g"](t.ruleForm).then((function(e){t.$message({message:"添加成功",duration:1500}),t.processOuterVisible=!1,t.typeApprovalProcess(t.ruleForm.id)})).catch((function(e){console.log(e)}))})):this.$refs[e].validate((function(e){if(!e)return!1;a["k"](t.ruleForm).then((function(e){t.$message({message:"修改成功",duration:1500}),t.processOuterVisible=!1,t.typeApprovalProcess(t.ruleForm.id)})).catch((function(e){console.log(e)}))}))},addTypeApproval:function(){this.personInfolist=[],this.searchname.employeeName="",this.selectStatus,""==this.ruleForm.style?this.alertMessage():(this.processOuterVisible=!0,this.ruleForm.name="",this.ruleForm.role="",this.ruleForm.personName="",this.ruleForm.personId="",this.ruleForm.state="启用")},alertMessage:function(){this.$message({message:"请选择类型",duration:1500})},typeApproval:function(){var e=this;a["h"]().then((function(t){e.optionslist=t.data})).catch((function(e){console.log(e)}))},typeApprovalProcess:function(e){var t=this,l={id:e};a["i"](l).then((function(e){t.ruleForm.orderNo="",t.typeApprovalProcesslist=e.data,t.ruleForm.orderNo=t.typeApprovalProcesslist.length+1})).catch((function(e){console.log(e)}))},switchType:function(e){var t={};t=this.optionslist.find((function(t){return t.id===e})),this.typeApprovalProcess(t.id),this.ruleForm.style=t.name,this.ruleForm.id=t.id}},mounted:function(){this.typeApproval()}},c=i,u=(l("aef1"),l("2877")),p=Object(u["a"])(c,r,o,!1,null,"37939256",null);t["default"]=p.exports}}]);